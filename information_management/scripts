create table Users(
    User_ID int auto_increment,
    First_Name varchar(255),
    Middle_Name varchar(255),
    Last_Name varchar(255),
    Email varchar(255),
    Pass_Hash varchar(60),
    User_Address varchar(255),
    Area_Code int,
    Phone_Number varchar(11),
    primary key(User_ID)
);


/*
create cart tables
*/

create table Carts (
    Cart_ID int auto_increment,
    User_ID int,
    primary key(Cart_ID),
    Foreign key(User_ID) references Users(User_ID)
);

/* create only carts for users who do not have*/

INSERT INTO Carts(User_ID)
SELECT User_ID FROM Users
WHERE User_ID NOT IN (SELECT User_ID FROM Carts);

CREATE TABLE Cart_Items (
    
    Serial_Number INT,
    User_ID int,
    Category_Number int,
    Item_Type_ID int,

    FOREIGN KEY (Serial_Number) REFERENCES IndividualItem(SerialNumber),
    FOREIGN KEY (Category_Number) REFERENCES 
    PRIMARY KEY (SerialNumber),
);

create table Supplier(
    Supplier_ID int auto_increment,
    Supplier_Name varchar(255),
    Supplier_Address varchar(255),
    Phone_Number varchar(11),
    Email varchar(255),

    primary key (Supplier_ID)
);

create table Product_Category (
    Category_Number int auto_increment,
    Category_Name varchar(255),

    primary key (Category_Number)
);

Create table Tracker(
    Order_ID int,
    Order_Status varchar(255),

    FOREIGN KEY (Order_ID) references Purchase_Order(Order_ID)
);

Create Table Payment_Method(
    Payment_Method_ID int auto_increment,
    User_ID int,
    Payment_Number double,
    Payment_Type varchar(255),

    PRIMARY KEY (Payment_Method_ID),
    FOREIGN KEY (User_ID) references Users(User_ID)
);

-- to show the inventory of a product category

select * from Item_Type where Category_Number = 1;
-- according to the sample data, this will show all exhausts



create table Item_Type (
    Item_Type_ID int auto_increment,
    Item_Name varchar(255),
    Cost int,
    Markup int,
    Quantity int,
    
    Category_Number int,
    Supplier_ID int,

    primary key (Item_Type_ID),
    Foreign key (Category_Number) references Product_Category(Category_Number),
    Foreign key (Supplier_ID) references Supplier(Supplier_ID)
);

create table Inventory(
    Serial_Number Double,
    User_ID int,
    Category_Number int,
    Item_Type_ID int,
    Date_Purchased DATE,

    primary key(Serial_Number),
    Foreign key(User_ID) references Users(User_ID),
    Foreign key(Category_Number) references Product_Category(Category_Number),
    Foreign key(Item_Type_ID) references Item_Type(Item_Type_ID)
);

CREATE TABLE Purchase_Order (
    Order_ID INT,
    User_ID INT,
    Total Float,
    Balance Float,
    User_Address VARCHAR(255),
    Area_Code INT,
    Order_Status varchar(255),
    
    PRIMARY KEY (Order_ID),
    FOREIGN KEY (User_ID) REFERENCES Users(User_ID)
);

-- in purchase order, when an entry is made the user address and area code is accessed through the
-- User ID

CREATE TABLE Purchase_Order_Item (
    Order_ID INT,
    Serial_Number DOUBLE,
    FOREIGN KEY (Order_ID) REFERENCES Purchase_Order(Order_ID),
    FOREIGN KEY (Serial_Number) REFERENCES Inventory(Serial_Number),
    PRIMARY KEY (Order_ID, Serial_Number)
);

CREATE TABLE Receipts(
    Receipt_ID int auto_increment,
    Order_ID int,
    User_ID Int,

    Amount_Paid float,
    Balance float,

    PRIMARY KEY (Receipt_ID),
    FOREIGN KEY (Order_ID) references Purchase_Order(Order_ID),
    FOREIGN KEY (User_ID) references Users (User_ID)
);

-- to show the stock of a specific item
select * from Inventory where Category_Number = 1 AND Item_Type_ID = 1;

/*
use bcrypt for password hash varchar(60) 4 rounds
sha256 binary64

alter table Users modify Pass_Hash varchar(60);
alter table Users modify Pass_Hash binary(64);
*/
Sample user 1

insert into Users(
    First_Name,
    Middle_Name,
    Last_Name,
    Email,
    Pass_Hash,
    User_Address,
    Area_Code,
    Phone_Number
) values (
    "Heart",
    "Alvern",
    "Sumicad",
    "21103828@usc.edu.ph",
    "$2a$05$0vzM7V8eI5k0qqNPkIj/k.wdX4.gROasc2sKnI7Jz.TgejjRUb1wC",
    "VR Apartelle",
    6000,
    "09776217464"
);

Sample user 2

insert into Users(
    First_Name,
    Middle_Name,
    Last_Name,
    Email,
    Pass_Hash,
    User_Address,
    Area_Code,
    Phone_Number
) values (
    "Nikolai",
    "Tristan",
    "Pazon",
    "21102134@usc.edu.ph",
    "$2a$04$nUAekMEbesH5Este61uG6ekXqYb1JtHPY0YU76fsjNpsueRKQ378W",
    "Corona Del Mar",
    6045,
    "09177173307"
);

Sample user 3

insert into Users(
    First_Name,
    Middle_Name,
    Last_Name,
    Email,
    Pass_Hash,
    User_Address,
    Area_Code,
    Phone_Number
) values (
    "Mary",
    "Joy",
    "Sia",
    "23400027@usc.edu.ph",
    "$2a$04$nUAekMEbesH5Este61uG6ekXqYb1JtHPY0YU76fsjNpsueRKQ378W",
    "G7 Suites Talamban",
    6000,
    "09177085294"
);



sample companies

INSERT INTO Supplier (Supplier_Name, Supplier_Address, Phone_Number, Email) 
VALUES 
('ABC Trading Co.', '123 Main Street, Cityville, CA', '12345678901', 'abc@example.com'),
('XYZ Enterprises', '456 Oak Avenue, Townsville, NY', '98765432100', 'xyz@example.com'),
('Global Suppliers LLC', '789 Maple Road, Villageton, TX', '55512345670', 'info@globalsuppliers.com');

sample Product_Category

Insert Into Product_Category(Category_Name)
values (
    "Exhausts"
),(
    "Side Mirrors"
),(
    "Wheel Sets"
);

-- Sample data for Exhausts category
INSERT INTO Item_Type (Item_Name, Cost, Markup, Quantity, Category_Number, Supplier_ID)
VALUES ('Performance Exhaust System', 500, 100, 20, 1, 1), -- ABC Trading Co.
       ('Sport Muffler', 300, 50, 15, 1, 2),               -- XYZ Enterprises
       ('Stainless Steel Exhaust Tip', 100, 30, 30, 1, 3); -- Global Suppliers LLC

-- Sample data for Side Mirrors category
INSERT INTO Item_Type (Item_Name, Cost, Markup, Quantity, Category_Number, Supplier_ID)
VALUES ('Power Side Mirror', 200, 40, 25, 2, 1),      -- ABC Trading Co.
       ('Heated Side Mirror', 250, 50, 20, 2, 2),     -- XYZ Enterprises
       ('LED Turn Signal Mirror', 150, 30, 30, 2, 3); -- Global Suppliers LLC

-- Sample data for Wheel Sets category
INSERT INTO Item_Type (Item_Name, Cost, Markup, Quantity, Category_Number, Supplier_ID)
VALUES ('Alloy Wheel Set', 800, 150, 10, 3, 1),      -- ABC Trading Co.
       ('Steel Wheel Set', 600, 100, 15, 3, 2),      -- XYZ Enterprises
       ('Chrome Wheel Set', 1000, 200, 8, 3, 3);     -- Global Suppliers LLC

--Sample Inventory Data

INSERT INTO Inventory (Serial_Number, User_ID, Category_Number, Item_Type_ID, Date_Purchased)
VALUES 
(123456789, NULL, 1, 1, '2024-04-15'),
(234567890, NULL, 1, 1, '2024-03-22'),
(345678901, NULL, 1, 2, '2024-03-30'),
(456789012, NULL, 1, 2, '2024-04-10'),
(567890123, NULL, 1, 3, '2024-03-18'),
(678901234, NULL, 1, 3, '2024-04-05'),
(789012345, NULL, 2, 4, '2024-04-02'),
(890123456, NULL, 2, 4, '2024-03-28'),
(901234567, NULL, 2, 5, '2024-03-20'),
(123456780, NULL, 2, 5, '2024-04-01'),
(234567891, NULL, 2, 6, '2024-04-12'),
(345678912, NULL, 2, 6, '2024-03-25'),
(456789023, NULL, 3, 7, '2024-03-29'),
(567890134, NULL, 3, 7, '2024-04-08'),
(678901245, NULL, 3, 8, '2024-03-24'),
(789012356, NULL, 3, 8, '2024-03-19'),
(890123467, NULL, 3, 9, '2024-04-04'),
(901234578, NULL, 3, 9, '2024-03-31');
